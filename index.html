<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clean Quarter - –ß–∏—Å—Ç –ö–≤–∞—Ä—Ç–∞–ª</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    
    <!-- SweetAlert2 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="/src/style.css">
    
    <style>
        .auth-page {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .auth-container {
            max-width: 500px;
            width: 100%;
        }

        .auth-card {
            border-radius: 12px;
            border: none;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            overflow: hidden;
        }

        .auth-header {
            background: linear-gradient(135deg, #28a745 0%, #218838 100%);
            color: white;
            padding: 2rem 1.5rem;
            text-align: center;
        }

        .auth-header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: white;
        }

        .auth-header p {
            margin: 0;
            font-size: 0.95rem;
            opacity: 0.9;
        }

        .auth-body {
            padding: 2rem 1.5rem;
        }

        .nav-tabs {
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 2rem;
            gap: 0.5rem;
        }

        .nav-tabs .nav-link {
            color: #6c757d;
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            padding: 0.75rem 1.25rem;
            transition: all 0.3s ease;
            background-color: transparent;
        }

        .nav-tabs .nav-link:hover {
            color: #28a745;
            border-bottom: 3px solid #28a745;
            background-color: rgba(40, 167, 69, 0.05);
        }

        .nav-tabs .nav-link.active {
            color: white;
            background-color: #28a745;
            border-bottom: 3px solid #28a745;
            border-radius: 6px 6px 0 0;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-label {
            color: #212529;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
        }

        .form-control,
        .form-select {
            border: 2px solid #e9ecef;
            border-radius: 6px;
            padding: 0.75rem;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .form-control:focus,
        .form-select:focus {
            border-color: #28a745;
            box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
            outline: none;
        }

        .form-control::placeholder {
            color: #adb5bd;
        }

        .btn-auth {
            width: 100%;
            padding: 0.75rem;
            font-weight: 600;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .btn-login {
            background-color: #28a745;
            color: white;
        }

        .btn-login:hover {
            background-color: #218838;
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        .btn-register {
            background-color: #17a2b8;
            color: white;
        }

        .btn-register:hover {
            background-color: #138496;
            box-shadow: 0 4px 12px rgba(23, 162, 184, 0.3);
        }

        .tab-pane {
            display: block !important;
            opacity: 0;
            visibility: hidden;
            position: absolute;
            width: 0;
            height: 0;
            overflow: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .tab-pane.show {
            opacity: 1;
            visibility: visible;
            position: static;
            width: auto;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="auth-page">
        <div class="auth-container">
            <div class="auth-card">
                <!-- Header -->
                <div class="auth-header">
                    <h1>‚ôªÔ∏è Clean Quarter</h1>
                    <p>–ß–∏—Å—Ç –ö–≤–∞—Ä—Ç–∞–ª</p>
                </div>

                <!-- Body -->
                <div class="auth-body">
                    <!-- Nav Tabs -->
                    <ul class="nav nav-tabs" id="authTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab">üîë –í—Ö–æ–¥</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab">üë§ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                        </li>
                    </ul>

                    <!-- Tab Content -->
                    <div class="tab-content" id="authTabContent">
                        <!-- Login Tab -->
                        <div class="tab-pane fade show active" id="login" role="tabpanel">
                            <form id="loginForm">
                                <div class="form-group">
                                    <label for="loginEmail" class="form-label">–ò–º–µ–π–ª</label>
                                    <input type="email" class="form-control" id="loginEmail" placeholder="your@email.com" required>
                                </div>
                                <div class="form-group">
                                    <label for="loginPassword" class="form-label">–ü–∞—Ä–æ–ª–∞</label>
                                    <input type="password" class="form-control" id="loginPassword" placeholder="–í—ä–≤–µ–¥–∏ –ø–∞—Ä–æ–ª–∞" required>
                                </div>
                                <div class="form-check" style="margin-bottom: 1.5rem;">
                                    <input class="form-check-input" type="checkbox" id="rememberMe" style="cursor: pointer;">
                                    <label class="form-check-label" for="rememberMe" style="cursor: pointer; font-size: 0.95rem; color: #6c757d;">
                                        –ó–∞–ø–æ–º–Ω–∏ –º–µ
                                    </label>
                                </div>
                                <button type="submit" class="btn-auth btn-login">–í—Ö–æ–¥</button>
                                <div style="text-align: center; margin-top: 1rem;">
                                    <a href="#" style="color: #28a745; text-decoration: none; font-size: 0.9rem; transition: color 0.3s ease;" onmouseover="this.style.color='#218838'" onmouseout="this.style.color='#28a745'" onclick="handleForgotPassword(event)">
                                        –ó–∞–±—Ä–∞–≤–µ–Ω–∞ –ø–∞—Ä–æ–ª–∞?
                                    </a>
                                </div>
                            </form>
                        </div>

                        <!-- Register Tab -->
                        <div class="tab-pane fade" id="register" role="tabpanel">
                            <form id="registerForm">
                                <div class="form-group">
                                    <label for="registerEmail" class="form-label">–ò–º–µ–π–ª</label>
                                    <input type="email" class="form-control" id="registerEmail" placeholder="your@email.com" required>
                                </div>
                                <div class="form-group">
                                    <label for="registerPassword" class="form-label">–ü–∞—Ä–æ–ª–∞</label>
                                    <input type="password" class="form-control" id="registerPassword" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–∞" required onkeyup="checkPasswordStrength()">
                                    <div style="margin-top: 0.5rem;">
                                        <div style="height: 6px; background-color: #e9ecef; border-radius: 3px; overflow: hidden;">
                                            <div id="passwordStrengthBar" style="height: 100%; width: 0%; background-color: #dc3545; transition: all 0.3s ease;"></div>
                                        </div>
                                        <div id="passwordStrengthText" style="font-size: 0.85rem; color: #6c757d; margin-top: 0.25rem;">
                                            –ü–∞—Ä–æ–ª–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞: –≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏, –º–∞–ª–∫–∏ –±—É–∫–≤–∏, —á–∏—Å–ª–∞
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="registerPasswordConfirm" class="form-label">–ü–æ—Ç–≤—ä—Ä–¥–∏ –ø–∞—Ä–æ–ª–∞</label>
                                    <input type="password" class="form-control" id="registerPasswordConfirm" placeholder="–ü–æ–≤—Ç–æ—Ä–∏ –ø–∞—Ä–æ–ª–∞—Ç–∞" required>
                                </div>
                                <div class="form-group">
                                    <label for="registerNeighborhood" class="form-label">–¢–≤–æ–π –∫–≤–∞—Ä—Ç–∞–ª</label>
                                    <select class="form-select" id="registerNeighborhood" required>
                                        <option value="">–ò–∑–±–µ—Ä–∏ –∫–≤–∞—Ä—Ç–∞–ª...</option>
                                        <option value="Studentski Grad">–°—Ç—É–¥–µ–Ω—Ç—Å–∫–∏ –≥—Ä–∞–¥</option>
                                        <option value="Darvenitsa">–î–∞—Ä–≤–µ–Ω–∏—Ü–∞</option>
                                        <option value="Musagenitsa">–ú—É—Å–∞–≥–µ–Ω–∏—Ç—Å–∞</option>
                                        <option value="Vitosha">–í–∏—Ç–æ—à–∞ (–í–ï–¶)</option>
                                        <option value="Malinova Dolina">–ú–∞–ª–∏–Ω–æ–≤–∞ –¥–æ–ª–∏–Ω–∞</option>
                                    </select>
                                </div>

                                <!-- Terms and Conditions Checkboxes -->
                                <div style="background-color: #f8f9fa; padding: 1rem; border-radius: 6px; margin-bottom: 1.5rem;">
                                    <p style="font-weight: 600; color: #212529; margin-bottom: 1rem; font-size: 0.95rem;">–ó–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞:</p>
                                    
                                    <div class="form-check" style="margin-bottom: 1rem;">
                                        <input class="form-check-input" type="checkbox" id="acceptTerms" required style="cursor: pointer; width: 1.2rem; height: 1.2rem;">
                                        <label class="form-check-label" for="acceptTerms" style="cursor: pointer; font-size: 0.9rem; color: #212529; margin-left: 0.75rem; padding-top: 0.1rem;">
                                            –ó–∞–ø–æ–∑–Ω–∞—Ç —Å—ä–º –∏ –ø—Ä–∏–µ–º–∞–º 
                                            <a href="#" onclick="showTermsModal(event)" style="color: #28a745; text-decoration: none; font-weight: 600;">–û–±—â–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –∏ –ü–æ–ª–∏—Ç–∏–∫–∞—Ç–∞ –∑–∞ –ø–æ–≤–µ—Ä–∏—Ç–µ–ª–Ω–æ—Å—Ç</a>.
                                        </label>
                                    </div>

                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="acceptRisk" required style="cursor: pointer; width: 1.2rem; height: 1.2rem;">
                                        <label class="form-check-label" for="acceptRisk" style="cursor: pointer; font-size: 0.9rem; color: #212529; margin-left: 0.75rem; padding-top: 0.1rem;">
                                            –ü–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞–º, —á–µ –∏–º–∞–º –Ω–∞–≤—ä—Ä—à–µ–Ω–∏ 16 –≥–æ–¥–∏–Ω–∏. –†–∞–∑–±–∏—Ä–∞–º, —á–µ —É—á–∞—Å—Ç–∏–µ—Ç–æ –≤ –ø–æ—á–∏—Å—Ç–≤–∞–Ω–µ—Ç–æ –µ –Ω–∞–ø—ä–ª–Ω–æ –¥–æ–±—Ä–æ–≤–æ–ª–Ω–æ –∏ –Ω–∞ –º–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω —Ä–∏—Å–∫, –∫–∞—Ç–æ –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ä—Ç –Ω–µ –Ω–æ—Å–∏ –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç –∑–∞ –∑–ª–æ–ø–æ–ª—É–∫–∏.
                                        </label>
                                    </div>
                                </div>

                                <button type="submit" class="btn-auth btn-register" id="registerBtn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Terms and Conditions Modal -->
    <div id="termsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; overflow-y: auto; padding: 20px;">
        <div style="background: white; max-width: 600px; margin: 50px auto; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.2);">
            <div style="background: linear-gradient(135deg, #28a745 0%, #218838 100%); color: white; padding: 2rem; border-radius: 12px 12px 0 0;">
                <h2 style="margin: 0; color: white;">üìã –£—Å–ª–æ–≤–∏—è –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ</h2>
            </div>
            
            <div id="termsContent" style="padding: 2rem; max-height: 400px; overflow-y: auto;">
                <!-- PLACEHOLDER - Replace with your actual Terms and Conditions text -->
                <h4>1. –û–±—â–∏ —É—Å–ª–æ–≤–∏—è</h4>
                <p>–¢–æ–≤–∞ –µ placeholder —Ç–µ–∫—Å—Ç. –ú–æ–ª—è, –∑–∞–º–µ–Ω–∏ –≥–æ —Å—ä—Å —Å–≤–æ–∏—Ç–µ —Ä–µ–∞–ª–Ω–∏ —É—Å–ª–æ–≤–∏—è –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ.</p>
                
                <h4>2. –û—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è</h4>
                <p>–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –µ –æ—Ç–≥–æ–≤–æ—Ä–µ–Ω –∑–∞ –≤—Å–∏—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è, –∏–∑–≤—ä—Ä—à–µ–Ω–∏ –ø–æ–¥ —Å–≤–æ—è –∞–∫–∞—É–Ω—Ç.</p>
                
                <h4>3. –ê–≤—Ç–æ—Ä—Å–∫–∏ –ø—Ä–∞–≤–∞</h4>
                <p>–í—Å–∏—á–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∏ —Å–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–æ—Å—Ç –Ω–∞ Clean Quarter.</p>
                
                <h4>4. –û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç</h4>
                <p>–£—Å–ª—É–≥–∞—Ç–∞ —Å–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è "—Ç–∞–∫–∞–≤–∞, –∫–∞–∫–≤–∞—Ç–æ –µ" –±–µ–∑ –Ω–∏–∫–∞–∫–≤–∏ –≥–∞—Ä–∞–Ω—Ü–∏–∏.</p>
                
                <h4>5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç—Ç–∞</h4>
                <p>Clean Quarter –Ω–µ –æ—Ç–≥–æ–≤–∞—Ä—è –∑–∞ –ø—Ä–µ–∫–∏ –∏–ª–∏ –Ω–µ–ø—Ä–µ–∫–∏ —â–µ—Ç–∏.</p>
            </div>

            <div style="padding: 1.5rem 2rem; border-top: 1px solid #e9ecef; background: #f8f9fa; border-radius: 0 0 12px 12px; text-align: right;">
                <button onclick="closeTermsModal()" style="margin-right: 0.5rem; padding: 0.5rem 1.5rem; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">–ó–∞—Ç–≤–æ—Ä–∏</button>
                <button onclick="acceptTerms()" style="padding: 0.5rem 1.5rem; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">–ü—Ä–∏–µ–º–∞–º</button>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Leaflet JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    
    <!-- Main App Script -->
    <script type="module" src="/src/main.js"></script>
    
    <script>
        /**
         * Handle forgot password link
         */
        function handleForgotPassword(e) {
            e.preventDefault();
            Swal.fire({
                title: '–ó–∞–±—Ä–∞–≤–µ–Ω–∞ –ø–∞—Ä–æ–ª–∞',
                html: '<p>–í—ä–≤–µ–¥–∏ —Å–≤–æ—è –∏–º–µ–π–ª –∞–¥—Ä–µ—Å –∏ —â–µ –∏–∑–ø—Ä–∞—Ç–∏–º –ª–∏–Ω–∫ –∑–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ.</p>' +
                      '<input type="email" id="resetEmail" class="swal2-input" placeholder="your@email.com">',
                icon: 'info',
                showCancelButton: true,
                confirmButtonColor: '#28a745',
                cancelButtonColor: '#6c757d',
                confirmButtonText: '–ò–∑–ø—Ä–∞—Ç–∏ –ª–∏–Ω–∫',
                cancelButtonText: '–û—Ç–º—è–Ω–∞'
            }).then((result) => {
                if (result.isConfirmed) {
                    const email = document.getElementById('resetEmail').value;
                    if (email) {
                        Swal.fire({
                            title: '–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏–º–µ–π–ª–∞',
                            text: `–õ–∏–Ω–∫ –∑–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –µ –∏–∑–ø—Ä–∞—Ç–µ–Ω –Ω–∞ ${email}`,
                            icon: 'success',
                            confirmButtonColor: '#28a745'
                        });
                    } else {
                        Swal.fire({
                            title: '–ì—Ä–µ—à–∫–∞',
                            text: '–ú–æ–ª—è, –≤—ä–≤–µ–¥–∏ –∏–º–µ–π–ª –∞–¥—Ä–µ—Å',
                            icon: 'error'
                        });
                    }
                }
            });
        }

        /**
         * Check password strength
         */
        function checkPasswordStrength() {
            const password = document.getElementById('registerPassword').value;
            const strengthBar = document.getElementById('passwordStrengthBar');
            const strengthText = document.getElementById('passwordStrengthText');
            
            let strength = 0;
            let feedback = [];

            // Check length
            if (password.length >= 6) strength += 1;
            if (password.length >= 8) strength += 1;
            if (password.length >= 12) strength += 1;

            // Check lowercase
            if (/[a-z]/.test(password)) strength += 1;
            else feedback.push('–º–∞–ª–∫–∏ –±—É–∫–≤–∏');

            // Check uppercase
            if (/[A-Z]/.test(password)) strength += 1;
            else feedback.push('–≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏');

            // Check numbers
            if (/[0-9]/.test(password)) strength += 1;
            else feedback.push('—á–∏—Å–ª–∞');

            // Check special characters
            if (/[!@#$%^&*]/.test(password)) strength += 1;

            // Update visual bar
            const percentage = (strength / 7) * 100;
            strengthBar.style.width = percentage + '%';

            // Update color and text
            if (strength <= 2) {
                strengthBar.style.backgroundColor = '#dc3545'; // Red - Weak
                strengthText.textContent = 'üî¥ –°–ª–∞–±–∞ –ø–∞—Ä–æ–ª–∞ - –õ–∏–ø—Å–≤–∞—Ç: ' + feedback.join(', ');
                strengthText.style.color = '#dc3545';
            } else if (strength <= 4) {
                strengthBar.style.backgroundColor = '#ffc107'; // Orange - Medium
                strengthText.textContent = 'üü° –°—Ä–µ–¥–Ω–∞ –ø–∞—Ä–æ–ª–∞ - –õ–∏–ø—Å–≤–∞—Ç: ' + feedback.join(', ');
                strengthText.style.color = '#ffc107';
            } else {
                strengthBar.style.backgroundColor = '#28a745'; // Green - Strong
                strengthText.textContent = 'üü¢ –°–∏–ª–Ω–∞ –ø–∞—Ä–æ–ª–∞ ‚úì';
                strengthText.style.color = '#28a745';
            }
        }

        /**
         * Show Terms and Conditions modal
         */
        function showTermsModal(e) {
            e.preventDefault();
            document.getElementById('termsModal').style.display = 'block';
        }

        /**
         * Close Terms and Conditions modal
         */
        function closeTermsModal() {
            document.getElementById('termsModal').style.display = 'none';
        }

        /**
         * Accept Terms and Conditions
         */
        function acceptTerms() {
            document.getElementById('acceptTerms').checked = true;
            closeTermsModal();
        }

        /**
         * Close modal when clicking outside
         */
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('termsModal');
            if (event.target === modal) {
                closeTermsModal();
            }
        });

        /**
         * Validate register form - check if both Terms are accepted
         */
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            const acceptTerms = document.getElementById('acceptTerms');
            const acceptRisk = document.getElementById('acceptRisk');
            
            if (!acceptTerms.checked) {
                e.preventDefault();
                Swal.fire({
                    title: '–ì—Ä–µ—à–∫–∞',
                    text: '–¢—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–∏–µ–º–µ—à –û–±—â–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –∏ –ü–æ–ª–∏—Ç–∏–∫–∞—Ç–∞ –∑–∞ –ø–æ–≤–µ—Ä–∏—Ç–µ–ª–Ω–æ—Å—Ç',
                    icon: 'error',
                    confirmButtonColor: '#28a745'
                });
                return;
            }
            
            if (!acceptRisk.checked) {
                e.preventDefault();
                Swal.fire({
                    title: '–ì—Ä–µ—à–∫–∞',
                    text: '–¢—Ä—è–±–≤–∞ –¥–∞ –ø–æ—Ç–≤—ä—Ä–¥–∏—à, —á–µ —Ä–∞–∑–±–∏—Ä–∞—à —Ä–∏—Å–∫–æ–≤–µ—Ç–µ –∏ —É—Å–ª–æ–≤–∏—è—Ç–∞ –Ω–∞ —É—á–∞—Å—Ç–∏–µ',
                    icon: 'error',
                    confirmButtonColor: '#28a745'
                });
                return;
            }
        });
    </script>
</body>
</html>
